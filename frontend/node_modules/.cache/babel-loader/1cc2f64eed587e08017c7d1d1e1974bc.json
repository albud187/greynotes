{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\alfab\\\\Documents\\\\_Projects\\\\greynotes\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\alfab\\\\Documents\\\\_Projects\\\\greynotes\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\alfab\\\\Documents\\\\_Projects\\\\greynotes\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\alfab\\\\Documents\\\\_Projects\\\\greynotes\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Form,Input,Button}from'antd';import axios from'axios';import{List,Card}from'antd';import{Checkbox}from'antd';import{Row,Col}from'antd';import ListNoteTaskCheckbox from'./ListNoteTaskCheckbox.js';import*as API_PATHS from'../api_path.js';var API_PATH=API_PATHS.API_PATH;var textstyle={position:\"relative\"};var updatestyle={position:\"relative\",left:\"25px\",bottom:\"10px\"};var delstyle={position:\"relative\",left:\"25px\",bottom:\"5px\"};var rowstyle={marginBottom:'-4%'};var ListNoteDetailUpdateView=/*#__PURE__*/function(_React$Component){_inherits(ListNoteDetailUpdateView,_React$Component);var _super=_createSuper(ListNoteDetailUpdateView);function ListNoteDetailUpdateView(){var _this;_classCallCheck(this,ListNoteDetailUpdateView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={note_groups:[],list_note:{},list_note_entrys:[],list_note_actual:{},userid:''};_this.fetchNoteGroups=function(){axios.get(\"http://127.0.0.1:8000/api/notegroups_by_user?token=\"+localStorage['token']).then(function(result){_this.setState({note_groups:result.data});console.log(result.data);});};_this.fetchUserId=function(){axios.get(\"http://127.0.0.1:8000/api/Tokens/\".concat(localStorage['token'],\"/\")).then(function(result){_this.setState({userid:result.data.user});});};_this.handleListItemEdit=function(event,itemID,parentlist){event.preventDefault();var listentry=event.target.elements.listentry.value;console.log(listentry,parentlist);axios.put(\"http://127.0.0.1:8000/api/ListNoteEntrysAll/\".concat(itemID,\"/\"),{entry_text:listentry,parent_list:parentlist,author:_this.state.userid}).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});};_this.handleAddEntry=function(event,parentlist){event.preventDefault();var newlistentry=event.target.elements.newlistentry.value;axios.post('http://127.0.0.1:8000/api/ListNoteEntrysAll/',{entry_text:newlistentry,parent_list:parentlist,author:_this.state.userid});axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+parentlist).then(function(result){_this.setState({list_note_entrys:result.data,list_note:_this.props.listnotetID});});axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+parentlist).then(function(result){_this.setState({list_note_entrys:result.data,list_note:_this.props.listnotetID});});};_this.handleEntryDelete=function(event,listentryID,parentlist){event.preventDefault();axios.delete(\"http://127.0.0.1:8000/api/ListNoteEntrysAll/\".concat(listentryID,\"/\"));axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+parentlist).then(function(result){_this.setState({list_note_entrys:result.data,list_note:_this.props.listnotetID});});axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+parentlist).then(function(result){_this.setState({list_note_entrys:result.data,list_note:_this.props.listnotetID});});axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+parentlist).then(function(result){_this.setState({list_note_entrys:result.data,list_note:_this.props.listnotetID});});};_this.handleTitleAndGroup=function(event){event.preventDefault();var title=event.target.elements.title.value;var notegroup=event.target.elements.notegroup.value;axios.put(\"http://127.0.0.1:8000/api/ListNotes/\".concat(_this.props.listnotetID,\"/\"),{title:title,note_group:notegroup,author:_this.state.userid}).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});alert('note updated');};return _this;}_createClass(ListNoteDetailUpdateView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.fetchUserId();this.fetchNoteGroups();var listnotetID=this.props.listnotetID;axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist='+listnotetID).then(function(result){_this2.setState({list_note_entrys:result.data,list_note:_this2.props.listnotetID});});axios.get(\"http://127.0.0.1:8000/api/ListNotes/\".concat(this.props.listnotetID,\"/\")).then(function(result){_this2.setState({list_note_actual:result.data});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event){return _this3.handleTitleAndGroup(event);}},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Title\")),/*#__PURE__*/React.createElement(\"textarea\",{rows:\"1\",cols:\"50\",name:\"title\",defaultValue:this.props.listnotetitle}),/*#__PURE__*/React.createElement(\"select\",{name:\"notegroup\",id:\"notegroup\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"_ungrouped_\"),this.state.note_groups.map(function(val){return val.id==_this3.state.list_note_actual.note_group?/*#__PURE__*/React.createElement(\"option\",{value:val.id,selected:true},val.group_name):/*#__PURE__*/React.createElement(\"option\",{value:val.id},val.group_name);})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Update\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"New List Note Item\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event,parentlist){return _this3.handleAddEntry(event,_this3.state.list_note);}},/*#__PURE__*/React.createElement(\"textarea\",{rows:\"1\",cols:\"50\",name:\"newlistentry\",placeholder:\"new list item\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"*ADD*\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"List Note Items\")),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{span:120},/*#__PURE__*/React.createElement(List,{dataSource:this.state.list_note_entrys,bordered:true,renderItem:function renderItem(item){return/*#__PURE__*/React.createElement(Row,{style:rowstyle},/*#__PURE__*/React.createElement(List.Item,{key:item.id},/*#__PURE__*/React.createElement(Col,{span:1},/*#__PURE__*/React.createElement(ListNoteTaskCheckbox,{data:item,style:{position:'relative',xIndex:2,width:'10%'}})),/*#__PURE__*/React.createElement(Col,{span:20},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event,itemID,parentlist){return _this3.handleListItemEdit(event,item.id,item.parent_list);}},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,/*#__PURE__*/React.createElement(\"div\",{style:textstyle},/*#__PURE__*/React.createElement(\"textarea\",{rows:\"1\",cols:\"60\",name:\"listentry\",defaultValue:item.entry_text}))),/*#__PURE__*/React.createElement(\"th\",null,/*#__PURE__*/React.createElement(\"div\",{style:updatestyle},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"*UPDATE*\")))))),/*#__PURE__*/React.createElement(Col,{span:1},/*#__PURE__*/React.createElement(\"div\",{style:delstyle},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event,listentryID,parentlist){return _this3.handleEntryDelete(event,item.id,item.parent_list);}},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"*DELETE*\"))))));}}))),/*#__PURE__*/React.createElement(\"br\",null));}}]);return ListNoteDetailUpdateView;}(React.Component);export default ListNoteDetailUpdateView;","map":{"version":3,"sources":["C:/Users/alfab/Documents/_Projects/greynotes/frontend/src/forms/ListNoteDetailUpdateView.js"],"names":["React","Form","Input","Button","axios","List","Card","Checkbox","Row","Col","ListNoteTaskCheckbox","API_PATHS","API_PATH","textstyle","position","updatestyle","left","bottom","delstyle","rowstyle","marginBottom","ListNoteDetailUpdateView","state","note_groups","list_note","list_note_entrys","list_note_actual","userid","fetchNoteGroups","get","localStorage","then","result","setState","data","console","log","fetchUserId","user","handleListItemEdit","event","itemID","parentlist","preventDefault","listentry","target","elements","value","put","entry_text","parent_list","author","res","catch","err","handleAddEntry","newlistentry","post","props","listnotetID","handleEntryDelete","listentryID","delete","handleTitleAndGroup","title","notegroup","note_group","alert","listnotetitle","map","val","id","group_name","item","xIndex","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Input, Button } from 'antd';\r\nimport axios from 'axios';\r\nimport { List,Card } from 'antd';\r\nimport { Checkbox } from 'antd';\r\nimport { Row, Col } from 'antd';\r\nimport ListNoteTaskCheckbox from './ListNoteTaskCheckbox.js'\r\n\r\nimport * as API_PATHS from '../api_path.js'\r\nconst API_PATH = API_PATHS.API_PATH\r\n\r\nconst textstyle = {\r\n  position: \"relative\",\r\n\r\n}\r\n\r\nconst updatestyle = {\r\n     position: \"relative\",\r\n     left: \"25px\",\r\n     bottom:\"10px\"\r\n\r\n   };\r\n\r\nconst delstyle ={\r\n  position: \"relative\",\r\n  left: \"25px\",\r\n  bottom:\"5px\"\r\n}\r\n\r\nconst rowstyle = {\r\n  marginBottom: '-4%'\r\n}\r\n\r\nclass ListNoteDetailUpdateView extends React.Component {\r\n\r\n  state ={\r\n    note_groups: [],\r\n    list_note: {},\r\n    list_note_entrys: [],\r\n    list_note_actual:{},\r\n    userid:''\r\n  }\r\n\r\n  fetchNoteGroups = () => {\r\n    axios.get(\"http://127.0.0.1:8000/api/notegroups_by_user?token=\"+localStorage['token'])\r\n    .then(result => {this.setState({\r\n        note_groups: result.data\r\n      });\r\n      console.log(result.data)\r\n    });\r\n  }\r\n\r\n  fetchUserId = () => {\r\n    axios.get(`http://127.0.0.1:8000/api/Tokens/${localStorage['token']}/`).then(result=>{\r\n      this.setState({\r\n        userid:result.data.user\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n  handleListItemEdit =(event,itemID,parentlist)=>{\r\n    event.preventDefault()\r\n    const listentry = event.target.elements.listentry.value;\r\n    console.log(listentry, parentlist)\r\n    axios.put(`http://127.0.0.1:8000/api/ListNoteEntrysAll/${itemID}/`,{\r\n      entry_text:listentry,\r\n      parent_list:parentlist,\r\n      author:this.state.userid\r\n\r\n    })\r\n    .then(res=>console.log(res))\r\n    .catch(err=>console.log(err));\r\n\r\n  }\r\n\r\n  handleAddEntry = (event,parentlist) =>{\r\n    event.preventDefault()\r\n    const newlistentry = event.target.elements.newlistentry.value;\r\n    axios.post('http://127.0.0.1:8000/api/ListNoteEntrysAll/',{\r\n      entry_text:newlistentry,\r\n      parent_list:parentlist,\r\n      author:this.state.userid\r\n    })\r\n\r\n    axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +parentlist)\r\n    .then(result =>{this.setState({\r\n      list_note_entrys: result.data,\r\n      list_note:this.props.listnotetID\r\n    });\r\n    })\r\n\r\n    axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +parentlist)\r\n    .then(result =>{this.setState({\r\n      list_note_entrys: result.data,\r\n      list_note:this.props.listnotetID\r\n    });\r\n    })\r\n  }\r\n\r\n  handleEntryDelete = (event,listentryID,parentlist) =>{\r\n    event.preventDefault()\r\n    axios.delete(`http://127.0.0.1:8000/api/ListNoteEntrysAll/${listentryID}/`)\r\n\r\n      axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +parentlist)\r\n      .then(result =>{this.setState({\r\n        list_note_entrys: result.data,\r\n        list_note:this.props.listnotetID\r\n      });\r\n      })\r\n\r\n      axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +parentlist)\r\n      .then(result =>{this.setState({\r\n        list_note_entrys: result.data,\r\n        list_note:this.props.listnotetID\r\n      });\r\n      })\r\n\r\n      axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +parentlist)\r\n      .then(result =>{this.setState({\r\n        list_note_entrys: result.data,\r\n        list_note:this.props.listnotetID\r\n      });\r\n      })\r\n\r\n  }\r\n\r\n  handleTitleAndGroup = (event) =>{\r\n    event.preventDefault()\r\n    const title = event.target.elements.title.value;\r\n    const notegroup = event.target.elements.notegroup.value\r\n    axios.put(`http://127.0.0.1:8000/api/ListNotes/${this.props.listnotetID}/`, {\r\n    title: title,\r\n    note_group: notegroup,\r\n    author:this.state.userid\r\n  })\r\n  .then(res=>console.log(res))\r\n  .catch(err=>console.log(err));\r\n  alert('note updated')\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.fetchUserId()\r\n    this.fetchNoteGroups();\r\n    const listnotetID = this.props.listnotetID\r\n    axios.get('http://127.0.0.1:8000/api/ListNoteEntrysList/?parentlist=' +listnotetID)\r\n    .then(result => {this.setState({\r\n        list_note_entrys: result.data,\r\n        list_note:this.props.listnotetID\r\n        });\r\n  })\r\n    axios.get(`http://127.0.0.1:8000/api/ListNotes/${this.props.listnotetID}/`)\r\n      .then(result =>{this.setState({\r\n        list_note_actual:result.data\r\n      })})\r\n\r\n  }\r\n\r\n    render(){\r\n        return(\r\n      <div>\r\n\r\n      <form onSubmit={(event)=>this.handleTitleAndGroup(event)}>\r\n      <p><strong>Title</strong></p>\r\n        <textarea rows=\"1\" cols=\"50\" name=\"title\" defaultValue = {this.props.listnotetitle}/>\r\n\r\n      <select name=\"notegroup\" id=\"notegroup\">\r\n            <option value=\"\">_ungrouped_</option>\r\n            {this.state.note_groups.map((val)=>(\r\n              val.id == this.state.list_note_actual.note_group ? (\r\n                <option value={val.id} selected >{val.group_name}</option>\r\n              ):\r\n              <option value={val.id}>{val.group_name}</option>\r\n            ))}\r\n      </select>\r\n      <button type=\"submit\">Update</button>\r\n      </form>\r\n        <p><strong>New List Note Item</strong></p>\r\n\r\n      <form onSubmit={(event,parentlist)=>this.handleAddEntry(event,this.state.list_note)}>\r\n      <textarea rows=\"1\" cols=\"50\" name=\"newlistentry\" placeholder='new list item'/>\r\n      <button type=\"submit\">*ADD*</button>\r\n      </form>\r\n        <p><strong>List Note Items</strong></p>\r\n\r\n      <Row>\r\n        <Col span={120}>\r\n\r\n        <List\r\n          dataSource={this.state.list_note_entrys}\r\n          bordered\r\n          renderItem={item => (\r\n            <Row style ={rowstyle}>\r\n              <List.Item key={item.id}>\r\n              <Col span ={1}>\r\n              <ListNoteTaskCheckbox data={item} style={{ position: 'relative', xIndex: 2, width: '10%' }}></ListNoteTaskCheckbox>\r\n              </Col>\r\n\r\n              <Col span ={20}>\r\n\r\n                <form\r\n                onSubmit={(event,itemID,parentlist)=>this.handleListItemEdit(event,item.id,item.parent_list)}\r\n                >\r\n                <tr>\r\n                <th>\r\n                  <div style={textstyle}>\r\n                    <textarea rows=\"1\" cols=\"60\" name=\"listentry\" defaultValue = {item.entry_text}/>\r\n                  </div>\r\n                </th>\r\n                <th>\r\n                  <div style={updatestyle}>\r\n                    <button type=\"submit\">*UPDATE*</button>\r\n                  </div>\r\n                </th>\r\n                </tr>\r\n                </form>\r\n\r\n              </Col>\r\n\r\n              <Col span={1}>\r\n              <div style={delstyle}>\r\n                <form\r\n                onSubmit = {(event,listentryID,parentlist)=>this.handleEntryDelete(event,item.id,item.parent_list)}>\r\n                  <button type=\"submit\">*DELETE*</button>\r\n                </form>\r\n              </div>\r\n              </Col>\r\n                </List.Item>\r\n              </Row>\r\n            )}\r\n            />\r\n            </Col>\r\n          </Row>\r\n          <br></br>\r\n\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListNoteDetailUpdateView\r\n"]},"metadata":{},"sourceType":"module"}